<div class="lightbox-overlay" *ngIf="isOpen" (click)="close()">
    <!-- Close button -->
    <button class="close-btn" (click)="close()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>

    <!-- Navigation buttons for multiple images -->
    <button class="nav-btn prev" *ngIf="images.length > 1" (click)="prevImage($event)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
    </button>

    <button class="nav-btn next" *ngIf="images.length > 1" (click)="nextImage($event)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </button>

    <!-- Image container -->
    <div class="image-container" (click)="$event.stopPropagation()">
        <img [src]="images[currentIndex]" [alt]="'Image ' + (currentIndex + 1)" class="lightbox-image"
            (load)="onImageLoad()" [class.loading]="isLoading" />

        <!-- Loading spinner -->
        <div class="loading-spinner" *ngIf="isLoading">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Image counter -->
    <div class="image-counter" *ngIf="images.length > 1">
        {{ currentIndex + 1 }} / {{ images.length }}
    </div>

    <!-- Thumbnail strip for multiple images -->
    <div class="thumbnail-strip" *ngIf="images.length > 1" (click)="$event.stopPropagation()">
        <div class="thumbnail" *ngFor="let img of images; let i = index" [class.active]="i === currentIndex"
            (click)="goToImage(i)">
            <img [src]="img" [alt]="'Thumbnail ' + (i + 1)" />
        </div>
    </div>
</div>